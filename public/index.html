<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz de Quest√µes</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="challengeModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 10001; align-items: center; justify-content: center; padding: 20px;">
  <div style="background: white; padding: 30px; border-radius: 12px; text-align: center; max-width: 400px; width: 100%;">
    <h2 id="challengeTitle" style="margin-top: 0;">Desafio</h2>
    <div id="challengeContent">
      </div>
  </div>
</div>
<div id="chatHead" class="chat-head" style="display: none;">
    <!-- A foto do outro utilizador aparecer√° aqui -->
  <div id="chatOnlineIndicator" class="online-indicator"></div>
    <div id="emojiContainer" class="emoji-container"></div>
    <img src="https://placehold.co/60x60/74b9ff/FFF?text=?" alt="Chat">
    <span id="chatBadge" class="chat-badge" style="display: none;">0</span>
  </div>

  <!-- ============================================= -->
  <!-- ===== 2. ADICIONE A JANELA DO CHAT (Escondida) ===== -->
  <!-- ============================================= -->
  <div id="chatWidget" class="chat-widget" style="display: none;">
    <div class="chat-header">
      <h3 id="chatWithUser">Chat</h3>
      <button id="closeChatBtn">&times;</button>
    </div>
    <div id="chatMessages" class="chat-messages">
      <!-- As mensagens aparecer√£o aqui -->
    </div>
    <div class="chat-input">
      <!-- Input de ficheiro escondido -->
      <input type="file" id="imageUpload" accept="image/*" style="display: none;">
      
      <!-- Bot√£o de Upload (√≠cone de clip) -->
      <button id="chatUploadBtn" class="chat-icon-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
      </button>
      
      <!-- Input de texto -->
     <textarea id="chatTextInput" placeholder="Digite uma mensagem..." rows="1"></textarea>
      
      <!-- Bot√£o de Enviar -->
      <button id="chatSendBtn" class="chat-icon-btn chat-send-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
      </button>
    </div>
  </div>
  <!-- Overlay do V√≠deo (se voc√™ o manteve) -->
  <div id="easterEggOverlay" style="display: none;">
    <video id="easterEggVideo" src="/video/parabens.mp4" loop></video>
    <p id="unmuteText" style="display:none;"></p>
    <!-- O bot√£o fechar foi removido para o redirecionamento do WhatsApp -->
  </div>

  <!-- Port√£o de Login do Utilizador -->
  <div id="userGate">
    <div class="user-select-container">
      <h1>Quem √© voc√™?</h1>
      <div class="user-options">
        <div class="user-card" id="userIthalo" data-user="ithalo">
          <div class="user-photo-hover">
             <img src="video/ithalo.jpg" alt="Foto Ithalo">
          </div>
          <span>Ithalo</span>
        </div>
        <div class="user-card" id="userMatheus" data-user="matheus">
          <div class="user-photo-hover">
             <img src="video/matheus.jpg" alt="Foto Matheus">
          </div>
          <span>Matheus</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Conte√∫do Principal (come√ßa escondido) -->
  <div id="mainContent" style="display: none;">

    <!-- Barra de Navega√ß√£o -->
    <nav class="main-nav">
      <div class="nav-container">
        <div class="nav-brand">Simulado OGMO</div>
        <div class="nav-links">
          <a href="#" id="navSimulado">In√≠cio</a>
          <a href="#" id="navDesempenho">Desempenho</a>
        </div>
        <div id="currentUserDisplay" class="nav-user">
          Usu√°rio: <span>...</span>
        </div>
      </div>
    </nav>

    <!-- Container do Quiz -->
    <div class="container" id="quizContainer">
      <h1>Marfori Corporations</h1>
      <h2 class="subtitle">Simulado OGMO - CAPATAZIA</h2>

      <div class="top-area">
        <!-- Painel da Esquerda (Sele√ß√£o) -->
        <div class="folder-panel" id="folderPanel">
          <div style="font-weight:600; margin-bottom:8px; color:#27455a;" data-translate-key="selectSubject">Selecione a mat√©ria / parte:</div>
          <div id="foldersLoading" style="color:var(--muted)" data-translate-key="loading">Carregando...</div>
          <div id="foldersRoot" style="display:none"></div>
        </div>

        <!-- Painel da Direita (Controlos) -->
        <div class="controls">
          <label data-translate-key="selectedLabel">Mat√©ria selecionada</label>
          <div id="selectedSummary" class="select-summary" data-translate-key="noneSelected">Nenhuma selecionada</div>
          <label for="questionCount" data-translate-key="questionCountLabel">Quantidade de quest√µes</label>
          <input type="number" id="questionCount" min="1" placeholder="Ex: 5">
          <div class="button-row">
<button id="startBtn" data-translate-key="startButton">Iniciar Quiz</button>
<button id="challengeBtn" class="button-ghost">Desafiar</button> <button id="clearSelection" class="button-ghost" data-translate-key="clearButton">Limpar</button>

          </div>
        </div>
      </div>

      <!-- √Årea do Quiz (vazia, preenchida por JS) -->
      <div id="quiz" class="quiz-area" style="display:none;"></div>

      <!-- Sec√ß√£o de PDFs -->
      <div class="pdf-section">
        <h3 style="margin:0 0 10px 0; color:#27455a;" data-translate-key="pdfTitle">üìö Conte√∫dos em PDF</h3>
        <ul id="pdfList" class="pdf-list">
          <li data-translate-key="loadingPDFs">Carregando PDFs...</li>
        </ul>
      </div>
    </div>
    
    <!-- Container do Desempenho (escondido) -->
    <div class="container" id="desempenhoContainer" style="display: none;">
      <h2>Seu Desempenho Geral</h2>
      <p>Aqui aparecer√£o suas estat√≠sticas de todos os simulados.</p>
      
     <div class="charts-container">
      <div class="chart-box" style="max-width: 350px;"> <!-- O max-width pode ficar -->
        <h3>Desempenho Geral (Total)</h3>
        <canvas id="totalPizzaChart"></canvas>
      </div>
       <div class="chart-box-full">
      <h3>Progresso ao Longo do Tempo</h3>
      <canvas id="timeSeriesChart"></canvas>
    </div>
      <div class="chart-box" style="max-width: 500px;"> <!-- O max-width pode ficar -->
        <h3>T√≥picos com Mais Erros (Total)</h3>
        <canvas id="totalBarChart"></canvas>
      </div>
    </div>
    </div>
    
  </div> <!-- Fim do #mainContent -->


  <!-- ============================================= -->
  <!-- ===== LISTA DE SCRIPTS CORRIGIDA ===== -->
  <!-- ============================================= -->
<!-- SUBSTITUA A SUA LISTA DE SCRIPTS POR ESTA -->
<script>
    // Define as vari√°veis globais partilhadas aqui
    // para garantir que elas existem antes de qualquer ficheiro as usar.
    let selectedSubjects = [];
  </script>
  <!-- 1. Fun√ß√µes Puras (Cl√°ssico) -->
  <script src="js/helpers.js"></script>
  <!-- 2. Fun√ß√µes de UI (Cl√°ssico) -->
  <script src="js/translator.js"></script>
  <script src="js/ui.js"></script>
  
  <!-- 3. L√≥gica do Quiz (Cl√°ssico) -->
  <script src="js/main.js"></script>

  <!-- 4. CARREGADOR DO FIREBASE (Forma Cl√°ssica) -->
  <!-- Carrega a biblioteca principal do Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <!-- Carrega a biblioteca do Firestore -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-storage-compat.js"></script>
  <!-- 5. L√ìGICA DO APP (Cl√°ssico) -->
  <!-- Carregado POR √öLTIMO, garantindo que 'firebase' existe -->
  <script src="js/app.js"></script>

</body>
</html>

















