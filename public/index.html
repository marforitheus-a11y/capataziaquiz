<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz de Quest√µes</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --primary: #0984e3;
  --primary-light: #74b9ff;
  --correct: #00b894;
  --wrong: #d63031;
  --bg: #f5f6fa;
  --text: #2d3436;
  --radius: 12px;
  --muted: #8b949e;
}

* { box-sizing: border-box; }

body {
  font-family: "Poppins", sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 0;
}

.container {
  max-width: 920px;
  margin: 40px auto;
  background: #fff;
  padding: 28px;
  border-radius: var(--radius);
  box-shadow: 0 6px 22px rgba(0,0,0,0.06);
  animation: fadeIn 0.35s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

h1 {
  text-align: center;
  font-weight: 600;
  color: var(--primary);
  letter-spacing: 0.5px;
  margin: 0 0 6px 0;
}

h2.subtitle {
  text-align: center;
  font-size: 1rem;
  color: #3b4a54;
  margin-top: 4px;
  font-weight: 500;
}

/* layout: left selector, right controls */
.top-area {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: 20px;
  align-items: start;
  margin-top: 18px;
}

/* Folder tree */
.folder-panel {
  background: #fbfdff;
  border: 1px solid #eef3fb;
  padding: 12px;
  border-radius: 10px;
  max-height: 420px;
  overflow: auto;
}

.folder {
  border-radius: 8px;
  margin-bottom: 8px;
  overflow: hidden;
  border: 1px solid transparent;
}

.folder-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  cursor: pointer;
  user-select: none;
  transition: background 0.15s, box-shadow 0.15s;
}

.folder-header:hover {
  background: rgba(9,132,227,0.04);
}

.folder-icon {
  width: 34px;
  height: 34px;
  background: linear-gradient(135deg, rgba(9,132,227,0.12), rgba(9,132,227,0.06));
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary);
  font-weight: 700;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.folder-title {
  font-weight: 600;
  font-size: 0.95rem;
  color: #0f3551;
  flex: 1;
}

.folder-count {
  font-size: 0.85rem;
  color: var(--muted);
}

/* caret rotation for open folders */
.caret {
  transition: transform 0.18s ease;
  margin-left: 8px;
  color: var(--muted);
}

.folder.open .caret { transform: rotate(90deg); }

/* sublist */
.sublist {
  list-style: none;
  padding: 8px;
  margin: 0;
  background: linear-gradient(180deg,#fff,#fbfdff);
}

.subitem {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  margin: 6px 0;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.12s, transform 0.06s;
  border: 1px solid transparent;
}

.subitem:hover {
  background: rgba(9,132,227,0.04);
  transform: translateY(-1px);
}

.subitem .name {
  font-weight: 500;
  color: #214455;
  font-size: 0.95rem;
}

.subitem .meta {
  font-size: 0.85rem;
  color: var(--muted);
}

/* selected */
.subitem.selected {
  background: linear-gradient(90deg, rgba(9,132,227,0.08), rgba(9,132,227,0.04));
  border: 1px solid rgba(9,132,227,0.12);
  box-shadow: 0 3px 8px rgba(9,132,227,0.06);
}

/* Right column (controls) */
.controls {
  background: #fff;
  border-radius: 10px;
  padding: 12px;
  border: 1px solid #eef3fb;
  display: flex;
  flex-direction: column;
  gap: 12px;
  height: fit-content;
}

.controls label { font-weight: 600; font-size: 0.95rem; color: #213444; }

.select-summary {
  font-size: 0.95rem;
  color: #2d3436;
  padding: 10px;
  border-radius: 8px;
  background: #fbfdff;
  border: 1px dashed #e6f0fb;
}

/* inputs/buttons */
input[type="number"] {
  width: 100%;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid #dfe8f5;
  font-size: 0.95rem;
  outline: none;
}

input[type="number"]:focus { box-shadow: 0 0 0 3px rgba(9,132,227,0.06); border-color: var(--primary); }

.button-row {
  display:flex;
  gap:10px;
  align-items:center;
}

button {
  padding: 10px 14px;
  background-color: var(--primary);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-family: "Poppins", sans-serif;
  font-weight: 600;
  letter-spacing: 0.2px;
  transition: background-color 0.18s, transform 0.08s;
}

.button-ghost {
  background: transparent;
  color: var(--primary);
  border: 1px solid rgba(9,132,227,0.12);
}

button:hover { transform: translateY(-2px); }
button.button-ghost:hover { background: rgba(9,132,227,0.04); }

/* quiz area stays similar to previous */
.quiz-area { margin-top: 22px; }

.meta {
  font-size: 0.9em;
  color: #777;
  text-align: left;
  margin-bottom: 10px;
}

.question h2 {
  font-size: 1rem;
  margin: 12px 0;
  line-height: 1.5;
}

.options { list-style: none; padding: 0; }

.option {
  background: #f1f2f6;
  padding: 12px 18px;
  margin: 8px 0;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.16s ease;
  border: 1px solid transparent;
  font-size: 0.95rem;
}

.option:hover { background: #e9eff7; transform: translateY(-1px); }

.correct { background-color: #daf7e8 !important; border: 1px solid var(--correct); }
.wrong { background-color: #ffe7e7 !important; border: 1px solid var(--wrong); }

.feedback { margin-top: 10px; font-weight: 600; text-align: center; }

.result { text-align: center; margin-top: 20px; }

/* comment style */
.comentario {
  background: #f9fbff;
  border-left: 4px solid var(--primary);
  margin-top: 10px;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 0.95rem;
  color: #2d3436;
  line-height: 1.5;
  box-shadow: 0 1px 3px rgba(0,0,0,0.03);
}

/* pdf list */
.pdf-section {
  margin-top: 28px;
  border-top: 2px solid #f0f3f7;
  padding-top: 18px;
}

.pdf-list { list-style: none; padding: 0; margin: 0; }
.pdf-list li { background: #fbfdff; margin: 8px 0; padding: 12px 14px; border-radius: 8px; display:flex; justify-content:space-between; align-items:center; border:1px solid #f1f6fb; }
.pdf-list a { color: var(--primary); text-decoration: none; font-weight: 600; }

/* small screens */
@media (max-width: 880px) {
  .top-area { grid-template-columns: 1fr; }
  .controls { order: 2; }
}
</style>
</head>
<body>
<div class="container">
  <h1>Marfori Corporations</h1>
  <div class="subtitle-area">
    <h2 class="subtitle">Simulado OGMO - CAPATAZIA</h2>
  </div>

  <div class="top-area">
    <!-- left: folder panel -->
    <div class="folder-panel" id="folderPanel">
      <div style="font-weight:600; margin-bottom:8px; color:#27455a;">Selecione a mat√©ria / parte:</div>
      <div id="foldersLoading" style="color:var(--muted)">Carregando...</div>
      <div id="foldersRoot" style="display:none"></div>
    </div>

    <!-- right: controls -->
    <div class="controls">
      <label>Mat√©ria selecionada</label>
      <div id="selectedSummary" class="select-summary">Nenhuma selecionada</div>

      <label for="questionCount">Quantidade de quest√µes</label>
      <input type="number" id="questionCount" min="1" placeholder="Ex: 5">

      <div class="button-row">
        <button id="startBtn">Iniciar Quiz</button>
        <button id="clearSelection" class="button-ghost">Limpar</button>
      </div>

      <div style="font-size:0.9rem; color:var(--muted); margin-top:8px;">
        Dica: clique na pasta para abrir/fechar. Depois clique na parte/p√°gina para selecionar.
      </div>
    </div>
  </div>

  <!-- quiz area -->
  <div id="quiz" class="quiz-area" style="display:none;"></div>

  <!-- PDF -->
  <div class="pdf-section">
    <h3 style="margin:0 0 10px 0; color:#27455a;">üìö Conte√∫dos em PDF</h3>
    <ul id="pdfList" class="pdf-list">
      <li>Carregando PDFs...</li>
    </ul>
  </div>
</div>

<script>
/* ====== Estado ====== */
let allQuestions = [];
let questions = [];
let currentQuestion = 0;
let userAnswers = {};
let lockSelection = false;
const AUTO_DELAY_MS = 1000;

let subjectsIndex = []; // conte√∫do de /json/index.json (array de {name,file})
let selectedFile = null; // arquivo json selecionado

/* ====== Helpers para agrupamento ====== */
function getGroupKey(name) {
  // Tenta identificar algo como "Lei 12815" ou "Decreto 8033" ou pega antes do '‚Äî' se existir.
  if (!name) return 'Outros';
  // remove contagem final " ‚Äî X quest√µes"
  const clean = name.split('‚Äî')[0].trim();
  // tenta encontrar um n√∫mero representativo (por ex. 12815)
  const numMatch = clean.match(/\b(\d{3,6})\b/);
  if (numMatch) {
    // tamb√©m pega um prefix como "Lei" ou "Decreto" se existir
    const prefixMatch = clean.match(/\b(Lei|Decreto|Lei Federal|Decreto Federal|Portaria|Resolu√ß√£o)\b/i);
    const prefix = prefixMatch ? prefixMatch[0] : '';
    return (prefix + ' ' + numMatch[1]).trim();
  }
  // fallback: usa texto antes do h√≠fen/tra√ßo se houver
  const dashParts = clean.split('-')[0].trim();
  if (dashParts.length > 0) return dashParts;
  // ultimate fallback
  return clean || 'Outros';
}

/* ====== Carregar e renderizar folders ====== */
async function loadSubjects() {
  try {
    const res = await fetch('/json/index.json');
    if (!res.ok) throw new Error('Falha ao carregar index.json');
    const subjects = await res.json();
    subjectsIndex = subjects;

    // para cada subject, vamos buscar o json e contar quest√µes (n√£o √© obrigat√≥rio, mas melhora UI)
    const enriched = await Promise.all(subjects.map(async s => {
      try {
        const r = await fetch(`/json/${s.file}`);
        if (!r.ok) throw new Error();
        const data = await r.json();
        return { name: s.name, file: s.file, count: (Array.isArray(data) ? data.length : 0) };
      } catch (e) {
        return { name: s.name, file: s.file, count: 0 };
      }
    }));

    // agrupar
    const groups = {};
    enriched.forEach(item => {
      const key = getGroupKey(item.name);
      if (!groups[key]) groups[key] = [];
      groups[key].push(item);
    });

    // ordenar grupos por nome
    const root = document.getElementById('foldersRoot');
    root.innerHTML = '';
    Object.keys(groups).sort().forEach(groupName => {
      const arr = groups[groupName];
      // criar elemento da pasta
      const folder = document.createElement('div');
      folder.className = 'folder';
      folder.innerHTML = `
        <div class="folder-header">
          <div class="folder-icon">${groupName.split(' ').slice(0,1)[0].slice(0,1).toUpperCase()}</div>
          <div style="display:flex;align-items:center;gap:10px;width:100%">
            <div class="folder-title">${groupName}</div>
            <div class="folder-count">${arr.reduce((a,b)=>a+b.count,0)} quest√µes</div>
            <div class="caret" style="margin-left:auto;">‚ñ∂</div>
          </div>
        </div>
        <ul class="sublist" style="display:none"></ul>
      `;
      const sublist = folder.querySelector('.sublist');

      // popular subitens
      arr.forEach(sub => {
        const li = document.createElement('li');
        li.className = 'subitem';
        li.innerHTML = `<div class="name">${sub.name}</div><div class="meta">${sub.count} quest√µes</div>`;
        li.addEventListener('click', (e) => {
          e.stopPropagation();
          selectSubitem(sub);
        });
        sublist.appendChild(li);
      });

      // toggle open on header click
      const header = folder.querySelector('.folder-header');
      header.addEventListener('click', () => {
        const isOpen = folder.classList.toggle('open');
        sublist.style.display = isOpen ? 'block' : 'none';
      });

      root.appendChild(folder);
    });

    document.getElementById('foldersLoading').style.display = 'none';
    root.style.display = 'block';
  } catch (err) {
    console.error('Erro ao carregar mat√©rias:', err);
    document.getElementById('foldersLoading').textContent = 'Erro ao carregar mat√©rias.';
  }
}

/* ====== sele√ß√£o de subitem ====== */
function clearSelectionUI() {
  selectedFile = null;
  document.getElementById('selectedSummary').textContent = 'Nenhuma selecionada';
  // remover destaque
  document.querySelectorAll('.subitem.selected').forEach(el => el.classList.remove('selected'));
}

function selectSubitem(sub) {
  // marca visualmente o selecionado
  document.querySelectorAll('.subitem.selected').forEach(el => el.classList.remove('selected'));

  // encontrar o elemento correspondente (compara nome e file)
  const subitems = Array.from(document.querySelectorAll('.subitem'));
  const target = subitems.find(si => si.querySelector('.name') && si.querySelector('.name').textContent.trim() === sub.name);
  if (target) target.classList.add('selected');

  selectedFile = sub.file;
  document.getElementById('selectedSummary').textContent = `${sub.name} ‚Äî ${sub.count} quest√µes`;
}

/* ====== carregar quiz file (mesma l√≥gica anterior) ====== */
async function loadQuizFile(filename) {
  const response = await fetch(`/json/${filename}`);
  if (!response.ok) throw new Error('Erro ao carregar o arquivo JSON');
  const data = await response.json();
  allQuestions = data;
  return data;
}

/* ====== iniciar quiz ====== */
document.getElementById('startBtn').addEventListener('click', async () => {
  const count = parseInt(document.getElementById('questionCount').value);
  if (!selectedFile) return alert('Selecione uma mat√©ria/parte no painel √† esquerda.');
  if (isNaN(count) || count < 1) return alert('Digite uma quantidade v√°lida.');

  try {
    const data = await loadQuizFile(selectedFile);
    startQuiz(data, count);
  } catch (e) {
    alert('Erro ao carregar o arquivo da parte selecionada.');
    console.error(e);
  }
});

document.getElementById('clearSelection').addEventListener('click', () => {
  clearSelectionUI();
});

  /* ====== ADICIONE ESTA NOVA FUN√á√ÉO ====== */

/**
 * Tenta extrair um t√≥pico de erro (ex: "Art. 5") do texto da quest√£o.
 * Se n√£o encontrar, usa a disciplina da quest√£o como fallback.
 */
function getErrorTopic(question) {
  // Texto onde vamos procurar (enunciado ou coment√°rio)
  const textToSearch = `${question.enunciado || ''} ${question.comentario || ''}`;
  
  // Regex para encontrar "Art." ou "Artigo" (case-insensitive) seguido de um n√∫mero
  const regex = /(Art\.|Artigo)\s+(\d+)/i;
  const match = textToSearch.match(regex);

  if (match) {
    // Se encontrar, retorna "Art. [numero]" (ex: "Art. 5")
    // match[2] √© o grupo que captura apenas os d√≠gitos (\d+)
    return `Art. ${match[2]}`;
  }
  
  // Se n√£o encontrar, retorna a disciplina ou "Outros"
  return question.disciplina || 'Outros';
}
/* ====== quiz core (adaptado do seu c√≥digo) ====== */
function startQuiz(data, count) {
  const shuffled = data.slice().sort(() => 0.5 - Math.random());
  questions = shuffled.slice(0, count);
  currentQuestion = 0;
  userAnswers = {};
  document.getElementById('quiz').style.display = 'block';
  // scroll to quiz
  document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
  renderQuestion();
}

function renderQuestion() {
  const quizDiv = document.getElementById("quiz");
  const q = questions[currentQuestion];
  lockSelection = false;

  const formattedEnunciado = (q.enunciado || '').replace(/\n/g, "<br>");

  const optionsHtml = Object.entries(q.alternativas || {}).map(([key, value]) => `
    <li class="option" data-key="${key}" onclick="selectOption('${q.id}', '${key}', this)">
      ${key}) ${value}
    </li>
  `).join('');

  quizDiv.innerHTML = `
    <div class="meta">
      <strong>Disciplina:</strong> ${q.disciplina || 'N/I'} ‚Ä¢ 
      <strong>Banca:</strong> ${q.banca || 'N/I'} ‚Ä¢ 
      <strong>Ano:</strong> ${q.ano || 'N/I'}
    </div>
    <div class="question">
      <h2>${currentQuestion + 1}. ${formattedEnunciado}</h2>
      <ul class="options">${optionsHtml}</ul>
      <div id="feedback"></div>
    </div>
  `;
}

function selectOption(questionId, optionKey, element) {
  if (lockSelection) return;
  lockSelection = true;
  const q = questions.find(x => x.id == questionId);
  const correct = q.resposta_correta;
  userAnswers[questionId] = optionKey;

  const parent = element.parentElement;
  const options = parent.querySelectorAll('.option');
  options.forEach(opt => {
    const key = opt.getAttribute('data-key');
    if (key === correct) opt.classList.add('correct');
    if (key === optionKey && optionKey !== correct) opt.classList.add('wrong');
    opt.setAttribute('aria-disabled', 'true');
  });

  const feedbackDiv = document.getElementById('feedback');
  feedbackDiv.innerHTML = optionKey === correct
    ? `<p class="feedback correct">‚úÖ Correto!</p>`
    : `<p class="feedback wrong">‚ùå Errado! Resposta correta: ${correct}) ${q.alternativas[correct]}</p>`;

  setTimeout(() => {
    if (currentQuestion < questions.length - 1) {
      currentQuestion++;
      renderQuestion();
    } else {
      showResults();
    }
  }, AUTO_DELAY_MS);
}

function showResults() {
  let correctCount = 0;
  const errorsByDiscipline = {}; // Mapa para o gr√°fico de barras

  // 1. Processar dados para os gr√°ficos
  questions.forEach(q => {
    const user = userAnswers[q.id];
    const right = q.resposta_correta;
    
    // ===== ALTERA√á√ÉO 1: Usar a nova fun√ß√£o para agrupar erros =====
    const topic = getErrorTopic(q); 
    // =============================================================

    if (user === right) {
      correctCount++;
    } else {
      // √â um erro, registrar para o gr√°fico de barras
      if (!errorsByDiscipline[topic]) {
        errorsByDiscipline[topic] = 0;
      }
      errorsByDiscipline[topic]++;
    }
  });

  const wrongCount = questions.length - correctCount;

  // 2. Construir o HTML dos Resultados
  let resultHTML = `
    <h2>Resultado Final</h2>
    <div class="charts-container" style="display: flex; gap: 20px; margin: 24px 0; flex-wrap: wrap; justify-content: center;">
      <div class="chart-box" style="flex: 1; min-width: 250px; max-width: 350px; background: #fbfdff; padding: 15px; border-radius: 10px; border: 1px solid #eef3fb;">
        <h3 style="margin-top:0; text-align:center; color: #27455a;">Desempenho Geral</h3>
        <canvas id="pizzaChart"></canvas>
      </div>
      <div class="chart-box" style="flex: 1.5; min-width: 300px; max-width: 500px; background: #fbfdff; padding: 15px; border-radius: 10px; border: 1px solid #eef3fb;">
        <h3 style="margin-top:0; text-align:center; color: #27455a;">T√≥picos com Erros</h3>
        <canvas id="barChart"></canvas>
      </div>
    </div>
    <hr style="border:0; border-top: 2px solid #f0f3f7; margin: 25px 0;">
  `;

  // Resumo e Bot√£o de Refazer
  resultHTML += `
    <div class='result' style="padding-bottom: 20px;">
      <h3>Voc√™ acertou ${correctCount} de ${questions.length} quest√µes.</h3>
      <button id="retryBtn">Refazer</button>
    </div>`;

  // Lista de Quest√µes (como antes)
  questions.forEach((q, index) => {
    const user = userAnswers[q.id];
    const right = q.resposta_correta;
    resultHTML += `
      <div class="question" style="text-align:left; margin-bottom:14px; background: #fdfdfd; padding: 10px; border-radius: 8px; border: 1px solid #f1f6fb;">
        <h3 style="margin:6px 0 10px 0; font-size: 1rem;">${index + 1}. ${(q.enunciado || '').replace(/\n/g, "<br>")}</h3>
        <ul class="options">
          ${Object.entries(q.alternativas || {}).map(([k,v]) => {
            const classes = [];
            if (k === right) classes.push('correct');
            if (user === k && user !== right) classes.push('wrong');
            let bgStyle = '#f1f2f6'; 
            if (k === right) bgStyle = '#daf7e8'; 
            else if (user === k) bgStyle = '#ffe7e7'; 
            return `<li class="option ${classes.join(' ')}" style="cursor:default; transform:none; background: ${bgStyle};">${k}) ${v}</li>`;
          }).join('')}
        </ul>
        ${q.comentario ? `<div class="comentario"><strong>Coment√°rio:</strong> ${q.comentario.replace(/\n/g,'<br>')}</div>` : ""}
      </div>`;
  });

  // 3. Renderizar o HTML na √°rea do quiz
  const quizDiv = document.getElementById("quiz");
  quizDiv.innerHTML = resultHTML;
  quizDiv.scrollIntoView({ behavior: 'smooth' });

  // 4. Renderizar Gr√°ficos e Adicionar Listener (ap√≥s o DOM atualizar)
  requestAnimationFrame(() => {
    
    // Listener do bot√£o Refazer
    const btn = document.getElementById('retryBtn');
    if (btn) btn.addEventListener('click', () => location.reload());

    // --- Renderizar Gr√°fico de Pizza ---
    const pizzaCtx = document.getElementById('pizzaChart');
    if (pizzaCtx) {
      new Chart(pizzaCtx, {
        type: 'doughnut',
        data: {
          labels: ['Acertos', 'Erros'],
          datasets: [{
            label: 'Desempenho',
            data: [correctCount, wrongCount],
            // ===== ALTERA√á√ÉO 2: Cores corrigidas (trocadas de 'var(...)' para hex) =====
            backgroundColor: ['#00b894', '#d63031'], 
            // =========================================================================
            hoverOffset: 4
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { position: 'bottom' } }
        }
      });
    }

    // --- Renderizar Gr√°fico de Barras ---
    const barCtx = document.getElementById('barChart');
    const errorEntries = Object.entries(errorsByDiscipline); 
    
    if (barCtx && errorEntries.length > 0) {
      new Chart(barCtx, {
        type: 'bar', 
        data: {
          labels: errorEntries.map(entry => entry[0]), // Nomes dos t√≥picos (ex: "Art. 5")
          datasets: [{
            label: 'Quantidade de Erros',
            data: errorEntries.map(entry => entry[1]), // Contagem de erros
            backgroundColor: 'rgba(214, 48, 49, 0.6)', 
            // ===== ALTERA√á√ÉO 3: Cor da borda corrigida =====
            borderColor: '#d63031',
            // ===============================================
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } }, 
          scales: {
            y: { 
              beginAtZero: true,
              ticks: { stepSize: 1 }
            }
          }
        }
      });
    } else if (barCtx) {
      // Se n√£o houver erros, mostrar uma mensagem
      barCtx.parentElement.innerHTML += '<p style="text-align:center; color:var(--muted); margin-top:20px;">Nenhum erro registrado. Parab√©ns!</p>';
      barCtx.remove(); 
    }
  });
}
/* ====== PDFs (mantive igual) ====== */
async function loadPDFs() {
  const list = document.getElementById('pdfList');
  try {
    const response = await fetch('/pdf/index.json');
    if (!response.ok) throw new Error('Erro ao carregar lista de PDFs');
    const pdfs = await response.json();

    if (!pdfs || pdfs.length === 0) {
      list.innerHTML = '<li>Nenhum PDF encontrado.</li>';
      return;
    }

    list.innerHTML = '';
    pdfs.forEach(file => {
      const li = document.createElement('li');
      li.innerHTML = `
        <span>${file.name}</span>
        <a href="/pdf/${file.file}" target="_blank">Abrir</a>
      `;
      list.appendChild(li);
    });
  } catch (err) {
    console.error(err);
    list.innerHTML = '<li>Erro ao carregar arquivos PDF.</li>';
  }
}

/* ====== inicializar ====== */
loadSubjects();
loadPDFs();
</script>
</body>
</html>



